"use strict";sap.ui.define(["./BaseController","../model/formatter","sap/m/Text","sap/ui/table/Column","sap/ui/export/Spreadsheet","sap/m/MessageToast","sap/ui/table/TablePersoController","./ServicesPersoService","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/layout/VerticalLayout","sap/tnt/InfoLabel","sap/ui/core/Fragment"],function(e,t,a,o,i,n,s,r,l,c,p,u,d){function h(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const b=h(e);const g=h(t);const m=h(r);const f=b.extend("recap.capadvancedprogrammingmodel.btpservices.controller.Main",{constructor:function e(){b.prototype.constructor.apply(this,arguments);this.formatter=g},onInit:async function e(){this.btpServiceState=this.getOwnerComponent().getModel("btp");this.btpServiceStateData=this.btpServiceState.getData();this.tablePersoController=new s({table:this.byId("genericTable"),persoService:m,showResetAll:false});await this.showBusyDialog();await this.btpServiceState.read();this.hideBusyDialog()},hideBusyDialog:function e(){this.busyDialog.close()},showBusyDialog:async function e(){if(!this.busyDialog){this.busyDialog=await d.load({name:"recap.capadvancedprogrammingmodel.btpservices.view.dialog.BusyDialog",controller:this});this.getView().addDependent(this.busyDialog)}this.busyDialog.open()},createColumns:function e(t,i){const n=i.getObject();const s=new p;const r=new u({text:`{btp>name}`,colorScheme:6});s.bindAggregation("content",{path:`${n.id}Plans`,model:"btp",template:r,templateShareable:true});return new o({label:n.name,width:n.id==="Name"?"250px":"auto",template:n.id==="Name"?new a({text:`{btp>${n.id}}`}):s})},onExport:function e(){const t=this.byId("genericTable");const a=t.getBinding("rows");const o=this.btpServiceStateData.columns.map(e=>({label:e.name,property:e.id}));const s={workbook:{columns:o},dataSource:a};const r=new i(s);r.build().then(function(){n.show("Spreadsheet export has finished")}).finally(function(){r.destroy()})},onTablePerso:async function e(t){this.tablePersoController.openDialog({})},onFilterTableServices:async function e(t){const a=await this.openFragment({name:"recap.capadvancedprogrammingmodel.btpservices.view.dialog.FilterServices"});if(a.length>0){this.byId("genericTable").getBinding("rows").filter(new l({filters:a.map(e=>new l({path:"Id",operator:c.EQ,value1:e})),and:false}))}}});return f});
//# sourceMappingURL=Main.controller.js.map